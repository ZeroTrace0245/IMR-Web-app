/* Layout shell */
.nav-menu {
    background: linear-gradient(180deg, var(--sidebar-bg) 0%, var(--sidebar-bg-2) 85%);
    color: var(--sidebar-text);
    min-height: 100%;
    box-shadow: 12px 0 30px rgba(0, 0, 0, 0.16);
    border-right: 1px solid var(--sidebar-divider);
}

.navbar-toggler {
    background-color: rgba(255, 255, 255, 0.12);
    border: 1px solid var(--card-border);
}

.navbar-toggler-icon { filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }
body.theme-dark .navbar-toggler-icon { filter: invert(1) drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }

.top-row {
    min-height: 3.75rem;
    background-color: transparent;
}

.navbar-brand { font-size: 1.1rem; font-weight: 700; letter-spacing: 0.02em; }
.navbar-brand span { color: var(--primary); }

/* Role chip */
.nav-role {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding: 1.1rem 0 0.65rem 0;
    color: var(--muted);
}

.role-label {
    font-size: 0.72rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    opacity: 0.9;
}

.role-chip {
    background: var(--accent-soft);
    color: var(--accent-strong);
    border-radius: 999px;
    padding: 0.35rem 0.7rem;
    font-weight: 700;
    font-size: 0.85rem;
    border: 1px solid var(--card-border);
    box-shadow: inset 0 0 0 1px rgba(20, 184, 110, 0.1);
}

/* Navigation grouping */
.nav-groups { padding: 0.25rem 0 1.25rem 0; }
.nav-section { margin-bottom: 1.25rem; }

.nav-section-title {
    font-size: 0.72rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted);
    opacity: 0.86;
    margin-bottom: 0.35rem;
    padding-top: 0.25rem;
}

.nav-section:not(:first-of-type) { border-top: 1px dashed var(--sidebar-divider); padding-top: 0.65rem; }

.bi {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.6rem;
    height: 1.6rem;
    margin-right: 0.75rem;
    border-radius: 12px;
    background: linear-gradient(145deg, var(--surface-strong), rgba(15, 23, 42, 0.08));
    position: relative;
    background-size: cover;
    box-shadow: inset 0 0 0 1px var(--sidebar-divider);
}

body.theme-light .bi {
    background: linear-gradient(145deg, rgba(15, 23, 42, 0.12), rgba(59, 130, 246, 0.16));
    box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.2);
}

body.theme-light .nav-item ::deep a.nav-pill {
    background: rgba(15, 23, 42, 0.04);
    border-color: rgba(15, 23, 42, 0.08);
}

body.theme-light .nav-item ::deep a.nav-pill:hover {
    background: rgba(15, 23, 42, 0.08);
}

body.theme-light .nav-item ::deep a.nav-pill.active {
    background: rgba(20, 184, 110, 0.14);
    border-color: rgba(20, 184, 110, 0.5);
}

.bi::after { display: none; }

.bi-house-door-fill-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-house-door-fill' viewBox='0 0 16 16'%3E%3Cpath d='M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z'/%3E%3C/svg%3E"); }

.bi-plus-square-fill-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-plus-square-fill' viewBox='0 0 16 16'%3E%3Cpath d='M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z'/%3E%3C/svg%3E"); }

.bi-list-nested-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-list-nested' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M4.5 11.5A.5.5 0 0 1 5 11h10a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 1 3h10a.5.5 0 0 1 0 1H1a.5.5 0 0 1-.5-.5z'/%3E%3C/svg%3E"); }

.bi-speedometer2-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-speedometer2' viewBox='0 0 16 16'%3E%3Cpath d='M8 4a.5.5 0 0 0-.5.5v4.597l-1.356 1.356a.5.5 0 1 0 .707.707l1.5-1.5A.5.5 0 0 0 8.5 9.5v-5A.5.5 0 0 0 8 4Z'/%3E%3Cpath d='M3.278 5.5a.5.5 0 1 1-.833-.555A7 7 0 0 1 14.5 8a.5.5 0 0 1-1 0A6 6 0 0 0 3.278 5.5Zm-1.506 2a.5.5 0 0 1-.933-.36 7 7 0 0 1 12.38-2.934.5.5 0 1 1-.833.555A6 6 0 0 0 1.772 7.5ZM1.5 10.5a.5.5 0 0 0-1 0 7 7 0 1 0 14 0 .5.5 0 0 0-1 0 6 6 0 1 1-12 0Z'/%3E%3C/svg%3E"); }

.bi-people-fill-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-people-fill' viewBox='0 0 16 16'%3E%3Cpath d='M7 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm5 2a2 2 0 1 0-2-2 2 2 0 0 0 2 2Z'/%3E%3Cpath fill-rule='evenodd' d='M14 12s-1-1-4-1-4 1-4 1v1h8v-1Zm-9.784-.998C2.682 11.08 1 11.523 1 13v1h5v-1c0-1.02.387-1.818 1.086-2.408A7.09 7.09 0 0 0 4.216 11.002Z'/%3E%3C/svg%3E"); }

.bi-hdd-network-fill-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-hdd-network-fill' viewBox='0 0 16 16'%3E%3Cpath d='M4.5 11a.5.5 0 0 0-.5.5V12H1.5A1.5 1.5 0 0 1 0 10.5v-8A1.5 1.5 0 0 1 1.5 1h13A1.5 1.5 0 0 1 16 2.5v8a1.5 1.5 0 0 1-1.5 1.5H12v-.5a.5.5 0 0 0-.5-.5h-7Z'/%3E%3Cpath d='M5.5 11.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5V12h-8v-.5Zm0 1h8v1h-8v-1Zm3.5 2a.5.5 0 0 1-.5-.5v-.5h2v.5a.5.5 0 0 1-.5.5h-1Z'/%3E%3C/svg%3E"); }

.bi-receipt-cutoff-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-receipt-cutoff' viewBox='0 0 16 16'%3E%3Cpath d='M1.92.506a.5.5 0 0 1 .347-.6l.997-.27 1.107.554 1.107-.554 1.107.554 1.107-.554 1.107.554 1.107-.554 1.107.554 1.107-.554 1.107.554 1.107-.554.997.27a.5.5 0 0 1 .347.6L13 6h-1l1-5.5L12.5.5l-1.107.554L10.286.5 9.179 1.054 8.072.5 6.965 1.054 5.858.5 4.751 1.054 3.644.5 2.537 1.054 1.43.5 1 .5 2 6H1l.92-5.494Z'/%3E%3Cpath d='M1 7h14v8l-1.5-1L12 15l-1.5-.5L9 15l-1.5-.5L6 15l-1.5-.5L3 15l-1.5-.5L0 15V7Zm3 2v1h8V9H4Zm0 3v1h8v-1H4Z'/%3E%3C/svg%3E"); }

.bi-cash-coin-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-cash-coin' viewBox='0 0 16 16'%3E%3Cpath d='M11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8Zm0-1a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z'/%3E%3Cpath d='M12 10.5a.5.5 0 0 0-.5-.5H11a1 1 0 0 0-.8 1.6l.6.8H10a.5.5 0 0 0 0 1h.5v.5a.5.5 0 0 0 1 0V13h.5a1 1 0 0 0 .8-1.6l-.6-.8H12a.5.5 0 0 0 .5-.5Z'/%3E%3Cpath d='M1 4a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1H1V4Zm0 3h12v4a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7Zm2 1a.5.5 0 0 0-.5.5v2A.5.5 0 0 0 3 11h1a.5.5 0 0 0 .5-.5v-2A.5.5 0 0 0 4 8H3Z'/%3E%3C/svg%3E"); }

.bi-graph-up-arrow-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-graph-up-arrow' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M0 0h1v15h15v1H0V0Zm14.854 4.854a.5.5 0 0 0-.708-.708l-3 3-2-2-3.5 3.5-1.646-1.647a.5.5 0 0 0-.708.708l2 2a.5.5 0 0 0 .708 0L9.5 7.707l2 2 3.354-3.353Z'/%3E%3C/svg%3E"); }

.bi-clock-history-nav-menu { background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='white' class='bi bi-clock-history' viewBox='0 0 16 16'%3E%3Cpath d='M8.515 3.01a5 5 0 1 1-4.717 2.757.5.5 0 0 1 .886-.463 4 4 0 1 0 3.83-2.294v1.99L11 7.5a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V3a.5.5 0 0 1 .515-.5Z'/%3E%3Cpath d='M7 3.1V1.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1.6a.5.5 0 0 1-.61.49L7.39 3.59A.5.5 0 0 1 7 3.1Z'/%3E%3C/svg%3E"); }

/* Nav items */
.nav-item { font-size: 0.98rem; padding-bottom: 0.35rem; }
.nav-item:first-of-type { padding-top: 0.35rem; }
.nav-item:last-of-type { padding-bottom: 0.75rem; }

.nav-item ::deep a.nav-pill {
    color: var(--sidebar-text);
    border-radius: 12px;
    height: 3rem;
    display: flex;
    align-items: center;
    line-height: 3rem;
    background: var(--surface-strong);
    border: 1px solid transparent;
    transition: all 200ms ease;
    position: relative;
    overflow: hidden;
}

.nav-item ::deep a.nav-pill::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 4px;
    height: 100%;
    background: var(--accent-strong);
    opacity: 0;
    transition: opacity 180ms ease;
}

.nav-item ::deep a.nav-pill.active {
    background: var(--accent-soft);
    color: var(--accent-strong);
    border-color: var(--accent-strong);
    box-shadow: inset 2px 0 0 var(--accent-strong);
}

.nav-item ::deep a.nav-pill.active::before { opacity: 1; }

.nav-item ::deep a.nav-pill:hover {
    background: rgba(59,130,246,0.08);
    color: var(--text);
    border-color: var(--card-border);
    transform: translateX(4px);
    box-shadow: 0 10px 18px rgba(0, 0, 0, 0.08);
}

@media (min-width: 641px) {
    .navbar-toggler { display: none; }

    .collapse { display: block; }

    .nav-scrollable {
        height: calc(100vh - 3.75rem);
        overflow-y: auto;
        padding-bottom: 1.25rem;
    }
}

@media (max-width: 640.98px) {
    .nav-menu { padding-bottom: 1.1rem; }
    .nav-scrollable { max-height: calc(100vh - 3.75rem); overflow-y: auto; }
}
